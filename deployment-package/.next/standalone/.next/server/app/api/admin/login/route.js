"use strict";(()=>{var e={};e.id=672,e.ids=[672],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3797:(e,t,n)=>{n.r(t),n.d(t,{headerHooks:()=>f,originalPathname:()=>w,patchFetch:()=>A,requestAsyncStorage:()=>l,routeModule:()=>p,serverHooks:()=>g,staticGenerationAsyncStorage:()=>m,staticGenerationBailout:()=>h});var r={};n.r(r),n.d(r,{DELETE:()=>d,POST:()=>c});var i=n(884),a=n(6132),s=n(1040),o=n(5798),u=n(8192);async function c(e){try{let{username:t,password:n}=await e.json();if(!t||!n)return o.Z.json({error:"用户名和密码不能为空"},{status:400});if(!(0,u.bD)(t,n))return o.Z.json({error:"用户名或密码错误"},{status:401});let r=(0,u.LC)(t),i=o.Z.json({success:!0,message:"登录成功",token:r});return i.cookies.set("admin_session",r,{httpOnly:!0,secure:!0,sameSite:"strict",maxAge:86400}),i}catch(e){return o.Z.json({error:"登录失败，请重试"},{status:500})}}async function d(e){let t=o.Z.json({message:"已登出"});return t.cookies.delete("admin_session"),t}let p=new i.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/admin/login/route",pathname:"/api/admin/login",filename:"route",bundlePath:"app/api/admin/login/route"},resolvedPagePath:"/Users/freeninglu/Desktop/paw-therapeutics-website-main /app/api/admin/login/route.ts",nextConfigOutput:"standalone",userland:r}),{requestAsyncStorage:l,staticGenerationAsyncStorage:m,serverHooks:g,headerHooks:f,staticGenerationBailout:h}=p,w="/api/admin/login/route";function A(){return(0,s.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:m})}},8192:(e,t,n)=>{n.d(t,{G3:()=>s,LC:()=>a,bD:()=>i});let r={username:"admin",password:"paw2024admin!"};function i(e,t){return e===r.username&&t===r.password}function a(e){let t={username:e,loginTime:new Date().toISOString(),exp:Date.now()+864e5};return Buffer.from(JSON.stringify(t)).toString("base64")}function s(e){let t=e.cookies.get("admin_session")?.value||e.headers.get("Authorization")?.replace("Bearer ","");return t?function(e){try{let t=JSON.parse(Buffer.from(e,"base64").toString());if(Date.now()>t.exp)return{isAuthenticated:!1};return{isAuthenticated:!0,username:t.username,loginTime:t.loginTime}}catch(e){return{isAuthenticated:!1}}}(t):{isAuthenticated:!1}}}};var t=require("../../../../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),r=t.X(0,[271,107],()=>n(3797));module.exports=r})();